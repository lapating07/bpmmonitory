const chartData = {
  labels: [],
  datasets: [
    {
      label: "Pulse Wave",
      data: [],
      borderColor: "#ff004c",
      borderWidth: 2,
      pointRadius: 0,
      tension: 0.1
    }
  ]
};

const liveChart = new Chart(ctx, {
  type: "line",
  data: chartData,
  options: {
    responsive: true,
    animation: false,
    scales: {
      x: { display: false },
      y: { min: 20000, max: 100000 }
    }
  }
});

// Live Wave Listener
db.ref("Live/Wave").on("value", snap => {
  const wave = snap.val();
  if (!wave) return;

  const t = new Date().toLocaleTimeString();
  chartData.labels.push(t);
  chartData.datasets[0].data.push(wave);

  if (chartData.labels.length > 100) {
    chartData.labels.shift();
    chartData.datasets[0].data.shift();
  }

  liveChart.update();
});
